<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Now Playing</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{
    margin:0;
    font-family:Arial, sans-serif;
    background:#121212;
    color:white;
}

.container{
    padding:20px;
}

.cover{
    width:160px;
    height:160px;
    border-radius:8px;
    background:#1db954;
    display:flex;
    align-items:center;
    justify-content:center;
    font-size:72px;
    font-weight:bold;
    margin-bottom:20px;
}

.song-title{
    font-size:24px;
    font-weight:bold;
}

.artist{
    color:#aaa;
    margin-top:4px;
}

.stats{
    margin-top:8px;
    color:#aaa;
    font-size:14px;
}

.actions{
    display:flex;
    gap:20px;
    margin-top:15px;
    font-size:20px;
}

.actions span{
    cursor:pointer;
}

.player{
    position:fixed;
    bottom:0;
    width:100%;
    background:#181818;
    padding:15px;
    display:flex;
    align-items:center;
    gap:10px;
}

button{
    background:#1db954;
    border:none;
    padding:12px 18px;
    border-radius:50px;
    cursor:pointer;
    font-size:16px;
}

.progress{
    width:100%;
}
</style>
</head>

<body>

<div class="container">
    <div class="cover" id="cover">?</div>

    <div class="song-title" id="title">No song</div>
    <div class="artist">sivamanihandan</div>

    <div class="stats" id="plays"></div>

    <div class="actions">
        <span id="likeBtn">ü§ç</span>
        <span id="shareBtn">üîó</span>
    </div>
</div>

<div class="player">
    <button id="playBtn">‚ñ∂ Play</button>
    <input type="range" id="progress" class="progress" value="0">
</div>

<audio id="audio"></audio>

<script>
const params = new URLSearchParams(window.location.search);
const songFile = params.get("song");

const audio = document.getElementById("audio");
const title = document.getElementById("title");
const cover = document.getElementById("cover");
const plays = document.getElementById("plays");
const progress = document.getElementById("progress");
const playBtn = document.getElementById("playBtn");
const likeBtn = document.getElementById("likeBtn");
const shareBtn = document.getElementById("shareBtn");

let liked = false;

function fake(min, max){
    return Math.floor(Math.random()*(max-min)+min);
}

if(songFile){
    const cleanName = decodeURIComponent(songFile).replace(".mp3","");
    title.textContent = cleanName;
    cover.textContent = cleanName[0].toUpperCase();
    audio.src = songFile;

    plays.textContent = fake(10_000,2_000_000).toLocaleString()+" plays";
}

playBtn.onclick = ()=>{
    audio.play().then(()=>{
        playBtn.textContent="‚è∏ Pause";
    });
};

audio.addEventListener("pause",()=>{
    playBtn.textContent="‚ñ∂ Play";
});

audio.addEventListener("timeupdate",()=>{
    progress.max = audio.duration || 0;
    progress.value = audio.currentTime || 0;
});

progress.oninput = ()=>{
    audio.currentTime = progress.value;
};

// Fake like toggle
likeBtn.onclick = ()=>{
    liked = !liked;
    likeBtn.textContent = liked ? "‚ù§Ô∏è" : "ü§ç";
};

// Share button
shareBtn.onclick = ()=>{
    navigator.clipboard.writeText(window.location.href);
    alert("Song link copied!");
};
</script>

</body>
</html>
